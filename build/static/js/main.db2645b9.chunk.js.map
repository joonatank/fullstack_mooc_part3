{"version":3,"sources":["server.js","App.js","index.js"],"names":["URI","axios","get","obj","post","id","put","delete","Flash","msg","look","className","Filter","filter","filterChangeCb","value","onChange","Person","person","delCb","name","number","onClick","bind","_id","Numbers","persons","numbers","x","length","includes","map","key","NewPerson","handleNameChangeCb","handleNumberChangeCb","addPersonCb","onSubmit","type","App","useState","setPerson","newName","setNewName","newNumber","setNewNumber","setFilter","flash","setFlash","errorFlash","setErrorFlash","useEffect","Server","then","resp","people","data","event","target","preventDefault","found","promise","setTimeout","catch","error","console","log","response","p","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.db2645b9.chunk.js","sourcesContent":["import axios from 'axios'\n\n/* Backend communication */\n//const URI = 'http://localhost:3001/api/persons'\n//const URI = 'https://fathomless-shore-94502.herokuapp.com/api/persons'\nconst URI = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(URI)\n}\n\nconst create = obj => {\n    return axios.post(URI, obj)\n}\n\nconst del = id => {\n    return axios.delete(`${URI}/${id}`)\n}\n\nconst update = (id, obj) => {\n    return axios.put(`${URI}/${id}`, obj)\n}\n\nexport default {\n    getAll: getAll,\n    create: create,\n    update: update,\n    del: del\n}\n","/*  Joonatan Kuosa\n *  2019-08-26\n *\n *  Helsinki Fullstack Mooc\n *  Exercise 2.6 - 2.18\n *\n *  Updated to run on exercise 3.18 backend\n */\nimport React, {useState, useEffect} from 'react';\nimport Server from './server'\nimport './App.css'\n\nconst Flash = ({msg, look}) => {\n    if (msg === null || msg === '') {\n        return null\n    }\n    else {\n        return (\n            <div className={look}>\n            {msg}\n            </div>\n        )\n    }\n}\nconst Filter = ({filter, filterChangeCb}) => {\n    return (\n        <p>\n        filter shown with : <input value={filter} onChange={filterChangeCb} />\n        </p>\n    )\n}\n\nconst Person = ({person, delCb}) => {\n    return (\n        <p>\n        {person.name} {person.number}\n        <button onClick={delCb.bind(this, person._id)}>delete</button>\n        </p>\n    )\n}\n\nconst Numbers = ({persons, filter, delCb}) => {\n    const numbers = persons\n        .filter((x) => filter.length === 0 || x.name.includes(filter))\n        .map(obj => <Person key={obj._id} person={obj} delCb={delCb} />)\n\n    return (\n        <div>\n            <h2>Numbers</h2>\n            {numbers}\n        </div>\n    )\n}\n\nconst NewPerson = ({name, number, handleNameChangeCb, handleNumberChangeCb, addPersonCb}) => {\n    return (\n        <div>\n            <form onSubmit={addPersonCb}>\n            <div>\n                name: <input value={name} onChange={handleNameChangeCb} />\n                <br />\n                number : <input value={number} onChange={handleNumberChangeCb} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n            </form>\n        </div>\n    )\n}\n\nconst App = () => {\n    const [ persons, setPerson ] = useState([])\n    const [ newName, setNewName ] = useState('')\n    const [ newNumber, setNewNumber ] = useState('')\n    const [ filter, setFilter ] = useState('')\n    const [ flash, setFlash] = useState(null)\n    const [ errorFlash, setErrorFlash] = useState(null)\n\n\n    useEffect(() => {\n        Server.getAll()\n            .then(resp => {\n                const people = resp.data\n                setPerson(people)\n            })\n    }, [newName])   // not perfect but avoids sending new requests at every render\n\n\n    const addPerson = (event) => {\n        // disable page reload\n        event.preventDefault()\n\n        const found = persons.filter((x) => x.name === newName)\n        const person = {name: newName, number: newNumber}\n\n        let promise = null\n        let msg = ''\n        if (found.length !== 0) {\n            const id = found[0]._id\n            promise = Server.update(id, person)\n            msg = 'Changed'\n        }\n        else {\n            promise = Server.create(person)\n            msg = 'Added'\n        }\n        promise.then(resp => {\n            setNewName('')\n            setNewNumber('')\n            setFlash(`${msg} person ${person.name}`)\n\n            setTimeout(() => setFlash(null), 5000)\n        })\n        .catch(error => {\n            console.log(error.response.data.error)\n            setErrorFlash(error.response.data.error)\n            setTimeout(() => setErrorFlash(null), 5000)\n        })\n    }\n\n    const handleNameChange = (event) => {\n        setNewName(event.target.value)\n    }\n\n    const handleNumberChange = (event) => {\n        setNewNumber(event.target.value)\n    }\n\n    const handleFilterChange = (event) => {\n        setFilter(event.target.value)\n    }\n\n    const delCb = id => {\n        const found = persons.filter(x => x._id === id)\n        const p = found[0]\n        console.log(`deleting ${id}`)\n        if (window.confirm(`Delete ${p.name}?`)) {\n            Server.del(id)\n        }\n    }\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Flash msg={flash} look=\"status\"/>\n            <Flash msg={errorFlash} look=\"error\"/>\n\n            <Filter filter={filter} filterChangeCb={handleFilterChange} />\n\n            <h3>Add a new</h3>\n            <NewPerson name={newName} number={newNumber} handleNameChangeCb={handleNameChange}\n                handleNumberChangeCb={handleNumberChange} addPersonCb={addPerson} />\n\n            <Numbers persons={persons} filter={filter} delCb={delCb} />\n        </div>\n    )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}